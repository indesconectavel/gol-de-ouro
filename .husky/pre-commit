#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Executando verificaÃ§Ãµes prÃ©-commit..."

# Executar linting
echo "ğŸ“ Verificando cÃ³digo com ESLint..."
npm run lint

# Executar testes unitÃ¡rios
echo "ğŸ§ª Executando testes unitÃ¡rios..."
npm run test

# Verificar se nÃ£o hÃ¡ arquivos de debug
echo "ğŸ” Verificando arquivos de debug..."
if git diff --cached --name-only | grep -E '\.(log|tmp|debug)$'; then
  echo "âŒ Arquivos de debug detectados! Remova antes de fazer commit."
  exit 1
fi

# Verificar se nÃ£o hÃ¡ credenciais expostas
echo "ğŸ”’ Verificando credenciais expostas..."
if git diff --cached --name-only | grep -E '\.(env|key|secret)$'; then
  echo "âŒ Arquivos sensÃ­veis detectados! NÃ£o commite arquivos de configuraÃ§Ã£o."
  exit 1
fi

echo "âœ… VerificaÃ§Ãµes prÃ©-commit concluÃ­das com sucesso!"
